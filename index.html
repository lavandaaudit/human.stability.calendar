<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<title>ibonarium.stability.human.lab.live</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
*{margin:0;padding:0;box-sizing:border-box;}
html,body{width:100%;height:100%;background:#000;color:#cfefff;font-family:Inter,monospace;overflow:hidden;display:flex;justify-content:center;align-items:center;}
#list{width:90%;max-width:700px;height:90%;overflow-y:auto;padding:20px;border:1px solid rgba(255,255,255,.2);text-align:center;}
.indicator{margin:4px 0;font-size:14px;background:rgba(255,255,255,.05);padding:6px 8px;border-left:4px solid #333;}
.green{border-color:#00ff88;color:#9affd1;}
.yellow{border-color:#ffcc00;color:#fff3a0;animation:pulse 2s infinite;}
.red{border-color:#ff3344;color:#ffb3b8;animation:pulse 1s infinite;}
@keyframes pulse{0%{opacity:.6}50%{opacity:1}100%{opacity:.6}}
</style>
</head>
<body>
<div id="list"></div>

<script>
const listEl = document.getElementById("list");
const values = [];

function level(v){ return v<0.4?"green":v<0.7?"yellow":"red"; }
function add(name,val){
  const d = document.createElement("div");
  d.className = `indicator ${level(Math.random())}`; // просто для кольору
  d.textContent = `${name}: ${val}`;
  listEl.appendChild(d);
}

// FETCH DATA
async function fetchData(){
  listEl.innerHTML = "";
  values.length = 0;

  try{
    // COSMOS
    const plasma = await fetch("https://services.swpc.noaa.gov/products/solar-wind/plasma-6-hour.json").then(r=>r.json());
    const mag = await fetch("https://services.swpc.noaa.gov/products/solar-wind/mag-6-hour.json").then(r=>r.json());
    const kp = await fetch("https://services.swpc.noaa.gov/products/noaa-planetary-k-index.json").then(r=>r.json());
    const lastPl = plasma.at(-1);
    const lastMag = mag.at(-1);
    const lastKp = kp.at(-1)[1];

    add("1. Solar Wind Speed (km/s)", lastPl[1]);
    add("2. Solar Wind Density (/cc)", lastPl[2]);
    add("3. Solar Wind Temp (K)", lastPl[3]);
    add("4. IMF Bz (nT)", lastMag[4]);
    add("5. Kp Index", lastKp);

    // додатково COSMOS
    const f107 = await fetch("https://services.swpc.noaa.gov/products/solar-flux/solar-flux.json").then(r=>r.json());
    add("6. Solar F10.7 Flux", f107.at(-1)[1]);
    add("7. Solar Proton Flux", f107.at(-1)[2] || "N/A"); // якщо є
    add("8. Geomagnetic Ap Index", f107.at(-1)[3] || "N/A");
    add("9. CME Alerts (SWPC)", "N/A");
    add("10. Aurora Oval Latitude", "N/A");

    // PLANET
    const eq = await fetch("https://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/all_hour.geojson").then(r=>r.json());
    add("11. EQ Count (hour)", eq.features.length);
    add("12. Max EQ Magnitude", Math.max(...eq.features.map(e=>e.properties.mag||0)));
    add("13. Min EQ Magnitude", Math.min(...eq.features.map(e=>e.properties.mag||0)));
    add("14. Recent EQ Latitude", eq.features.at(-1)?.geometry.coordinates[1] || "N/A");
    add("15. Recent EQ Longitude", eq.features.at(-1)?.geometry.coordinates[0] || "N/A");
    add("16. Recent EQ Depth (km)", eq.features.at(-1)?.geometry.coordinates[2] || "N/A");

    // додатково PLANET
    add("17. Volcano Count", "N/A");
    add("18. Tsunami Alerts", "N/A");
    const temp = await fetch("https://api.met.no/weatherapi/locationforecast/2.0/compact?lat=0&lon=0").then(r=>r.json());
    add("19. Global Avg Temp (K)", temp.properties.timeseries[0].data.instant.air_temperature || "N/A");
    add("20. Ocean Level Trend", "N/A");

  }catch(e){console.error("API Error", e);}
}

// INIT
fetchData();
setInterval(fetchData,60000);
</script>
</body>
</html>
