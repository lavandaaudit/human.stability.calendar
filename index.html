<script>
async function getDayDescription(dateStr){
    const date = new Date(dateStr);
    const day = date.getDate();
    const month = date.toLocaleString('uk-UA',{month:'long'});

    // Wikipedia API
    const wikiUrl = `https://uk.wikipedia.org/w/api.php?action=parse&page=${day}_${month}&format=json&origin=*`;
    const res = await fetch(wikiUrl);
    const data = await res.json();
    const html = data.parse.text["*"];
    const parser = new DOMParser();
    const doc = parser.parseFromString(html,"text/html");

    let churchHolidays=[], folkHolidays=[];

    const span = doc.querySelector('span#Свята_і_памятні_дні');
    if(span){
        const ulElem = span.parentElement.nextElementSibling;
        if(ulElem && ulElem.tagName==="UL"){
            ulElem.querySelectorAll('li').forEach(li=>{
                const text = li.textContent.trim();
                // просте розділення церковні / народні по ключових словах
                if(text.match(/Православні|церк/)) churchHolidays.push(text);
                else folkHolidays.push(text);
            });
        }
    }

    // Міжнародні свята можна додати окремим fetch до Calendarific
    let international = ["National Keto Day","National Bird Day"]; // приклад

    // Формуємо текст
    let desc=`Сьогодні, ${day} ${month} ${date.getFullYear()} року, відзначаються `;
    desc+=[...churchHolidays,...folkHolidays,...international].join(", ") + ".\n\n";
    if(churchHolidays.length) desc+="Церковні свята:\n- "+churchHolidays.join("\n- ")+"\n\n";
    if(folkHolidays.length || international.length) desc+="Народні та міжнародні свята:\n- "+[...folkHolidays,...international].join("\n- ");

    return desc;
}

// приклад виклику:
getDayDescription("2026-01-05").then(text=>{
    document.getElementById("holidays").textContent=text;
});
</script>
