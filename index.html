<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<title>ibonarium.stability.human.lab.live</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
*{margin:0;padding:0;box-sizing:border-box}
html,body{
  width:100%;
  height:100%;
  background:#000;
  color:#cfefff;
  font-family:Inter,monospace;
}

body{
  display:flex;
  align-items:center;
  justify-content:center;
}

#panel{
  width:90%;
  max-width:700px;
}

h1{
  text-align:center;
  font-size:16px;
  letter-spacing:2px;
  margin-bottom:16px;
  opacity:.8;
}

.item{
  display:flex;
  justify-content:space-between;
  padding:8px 12px;
  margin-bottom:6px;
  border-left:4px solid #333;
  background:rgba(255,255,255,.05);
}

.green{border-color:#00ff88;color:#9affd1}
.yellow{border-color:#ffcc00;color:#fff3a0}
.red{border-color:#ff3344;color:#ffb3b8}
</style>
</head>

<body>

<div id="panel">
  <h1>IBONARIUM Â· LIVE SIGNAL</h1>
  <div id="list"></div>
</div>

<script>
const list = document.getElementById("list");
let index = 0;

function level(v){
  return v < 40 ? "green" : v < 70 ? "yellow" : "red";
}

function add(name, value){
  index++;
  const d = document.createElement("div");
  d.className = "item " + level(value);
  d.innerHTML = `<span>${index}. ${name}</span><span>${value.toFixed(1)}</span>`;
  list.appendChild(d);
}

async function load(){
  list.innerHTML = "";
  index = 0;

  try{
    // NOAA Solar Wind Plasma
    const plasma = await fetch("https://services.swpc.noaa.gov/products/solar-wind/plasma-6-hour.json").then(r=>r.json());
    const pl = plasma.at(-1);
    add("Solar Wind Speed", Math.min(pl[1]/10,100));
    add("Solar Wind Density", Math.min(pl[2]*5,100));

    // NOAA Magnetic Field
    const mag = await fetch("https://services.swpc.noaa.gov/products/solar-wind/mag-6-hour.json").then(r=>r.json());
    const m = mag.at(-1);
    add("IMF Bz |nT|", Math.min(Math.abs(m[4])*5,100));

    // Kp Index
    const kp = await fetch("https://services.swpc.noaa.gov/products/noaa-planetary-k-index.json").then(r=>r.json());
    add("Planetary Kp Index", Math.min(kp.at(-1)[1]*11,100));

    // Earthquakes
    const eq = await fetch("https://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/all_hour.geojson").then(r=>r.json());
    add("Earthquakes (1h)", Math.min(eq.features.length*10,100));

    // Crypto
    const crypto = await fetch("https://api.coingecko.com/api/v3/simple/price?ids=bitcoin,ethereum&vs_currencies=usd").then(r=>r.json());
    add("Bitcoin USD", Math.min(crypto.bitcoin.usd/1000,100));
    add("Ethereum USD", Math.min(crypto.ethereum.usd/100,100));

    // Fear & Greed
    const fg = await fetch("https://api.allorigins.win/raw?url=https://api.alternative.me/fng/").then(r=>r.json());
    add("Fear & Greed Index", fg.data[0].value);

    // Social (Reddit)
    const r1 = await fetch("https://www.reddit.com/r/worldnews/.json?limit=100").then(r=>r.json());
    const r2 = await fetch("https://www.reddit.com/r/news/.json?limit=100").then(r=>r.json());
    const titles = [...r1.data.children, ...r2.data.children].map(p=>p.data.title).join(" ");
    const hits = (titles.match(/war|attack|crisis|earthquake|flood|strike/gi)||[]).length;
    add("Social Conflict Density", Math.min(hits*2,100));

  }catch(e){
    console.error(e);
    add("DATA ERROR",100);
  }
}

load();
setInterval(load,60000);
</script>

</body>
</html>
