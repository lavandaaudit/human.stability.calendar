<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<title>ibonarium.stability.human.lab.live</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
*{margin:0;padding:0;box-sizing:border-box}
html,body{width:100%;height:100%;background:#000;color:#cfefff;font-family:Inter,monospace;overflow:hidden;display:flex;align-items:center;justify-content:center}
#stars{position:fixed;inset:0;z-index:0}
#signal-list{position:relative;z-index:2;width:90%;max-width:600px;display:flex;flex-direction:column;gap:6px;}
.indicator{display:flex;justify-content:space-between;padding:6px 8px;font-size:14px;background:rgba(255,255,255,.05);border-left:4px solid #333}
.green{border-color:#00ff88;color:#9affd1}
.yellow{border-color:#ffcc00;color:#fff3a0;animation:pulse 2s infinite}
.red{border-color:#ff3344;color:#ffb3b8;animation:pulse 1s infinite}
@keyframes pulse{0%{opacity:.6}50%{opacity:1}100%{opacity:.6}}
</style>
</head>
<body>

<canvas id="stars"></canvas>
<div id="signal-list"></div>

<script>
// STARFIELD
const sc=document.getElementById("stars"),ctx=sc.getContext("2d");
let stars=[];
function resize(){ sc.width=innerWidth; sc.height=innerHeight;
  stars=Array.from({length:500},()=>({x:Math.random()*innerWidth-innerWidth/2,y:Math.random()*innerHeight-innerHeight/2,z:Math.random()*innerWidth}));
}
window.onresize=resize; resize();
function draw(){
  ctx.fillStyle="#000"; ctx.fillRect(0,0,sc.width,sc.height);
  ctx.save(); ctx.translate(sc.width/2,sc.height/2);
  stars.forEach(s=>{s.z-=1.5;if(s.z<1)s.z=sc.width;const k=140/s.z,px=s.x*k,py=s.y*k;ctx.fillStyle="#fff";ctx.fillRect(px,py,1,1)});
  ctx.restore(); requestAnimationFrame(draw);
}
draw();

// SIGNAL LIST ELEMENT
const signalList=document.getElementById("signal-list");

// HELPER
function level(v){ return v<0.4?"green":v<0.7?"yellow":"red"; }
function add(index,name,val){
  const d=document.createElement("div");
  d.className=`indicator ${level(parseFloat(val) || 0)}`;
  d.innerHTML=`<span>${index}. ${name}</span><span>${val}</span>`;
  signalList.appendChild(d);
}

// FETCH SIGNALS
async function fetchSignals(){
  signalList.innerHTML="";
  let i=1;

  // 1. Solar Wind Speed
  try{
    const plasma=await fetch("https://services.swpc.noaa.gov/products/solar-wind/plasma-6-hour.json").then(r=>r.json());
    const last=plasma.at(-1);
    add(i++,"Solar Wind Speed", last[1].toFixed(0)+" km/s");
  }catch(e){add(i++,"Solar Wind Speed","–");}

  // 2. Solar Wind Density
  try{
    const plasma=await fetch("https://services.swpc.noaa.gov/products/solar-wind/plasma-6-hour.json").then(r=>r.json());
    const last=plasma.at(-1);
    add(i++,"Solar Wind Density", last[2].toFixed(2)+" p/cm³");
  }catch(e){add(i++,"Solar Wind Density","–");}

  // 3. IMF Bz
  try{
    const mag=await fetch("https://services.swpc.noaa.gov/products/solar-wind/mag-6-hour.json").then(r=>r.json());
    const last=mag.at(-1);
    add(i++,"IMF Bz (|nT|)", Math.abs(last[4]).toFixed(2));
  }catch(e){add(i++,"IMF Bz (|nT|)","–");}

  // 4. Planetary Kp Index
  try{
    const kp=await fetch("https://services.swpc.noaa.gov/products/noaa-planetary-k-index.json").then(r=>r.json());
    const last=kp.at(-1)[1];
    add(i++,"Planetary Kp Index", last);
  }catch(e){add(i++,"Planetary Kp Index","–");}

  // 5. EQ Count (USGS last hour)
  try{
    const eq=await fetch("https://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/all_hour.geojson").then(r=>r.json());
    add(i++,"EQ Count (hour)", eq.features.length);
  }catch(e){add(i++,"EQ Count (hour)","–");}

  // 6. Bitcoin Price
  try{
    const p=await fetch("https://api.coingecko.com/api/v3/simple/price?ids=bitcoin&vs_currencies=usd").then(r=>r.json());
    add(i++,"Bitcoin USD", "$"+p.bitcoin.usd.toLocaleString());
  }catch(e){add(i++,"Bitcoin USD","–");}

  // 7. Ethereum Price
  try{
    const p=await fetch("https://api.coingecko.com/api/v3/simple/price?ids=ethereum&vs_currencies=usd").then(r=>r.json());
    add(i++,"Ethereum USD", "$"+p.ethereum.usd.toLocaleString());
  }catch(e){add(i++,"Ethereum USD","–");}

  // 8. Fear & Greed
  try{
    const fgRaw=await fetch("https://api.allorigins.win/raw?url=https://api.alternative.me/fng/").then(r=>r.json());
    const fg=parseFloat(fgRaw.data[0].value);
    add(i++,"Fear & Greed Index", fg);
  }catch(e){add(i++,"Fear & Greed Index","–");}

  // 9. Reddit r/worldnews
  try{
    const r=await fetch("https://www.reddit.com/r/worldnews/.json?limit=50").then(r=>r.json());
    add(i++,"Reddit r/worldnews Posts", r.data.children.length);
  }catch(e){add(i++,"Reddit r/worldnews Posts","–");}

  // 10. Reddit r/news
  try{
    const r=await fetch("https://www.reddit.com/r/news/.json?limit=50").then(r=>r.json());
    add(i++,"Reddit r/news Posts", r.data.children.length);
  }catch(e){add(i++,"Reddit r/news Posts","–");}
}

// INITIAL CALL & LOOP
fetchSignals();
setInterval(fetchSignals,60000);
</script>
</body>
</html>
