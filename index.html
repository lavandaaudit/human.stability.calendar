<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<title>IBONARIUM · 50 Real-Time Indicators</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
*{margin:0;padding:0;box-sizing:border-box;}
html,body{width:100%;height:100%;background:#000;color:#cfefff;font-family:Inter,monospace;display:flex;justify-content:center;align-items:center;overflow:hidden;}
#list{width:90%;max-width:800px;height:90%;overflow-y:auto;padding:20px;border:1px solid rgba(255,255,255,.2);text-align:center;}
.indicator{margin:4px 0;font-size:14px;background:rgba(255,255,255,.05);padding:6px 8px;border-left:4px solid #333;}
.green{border-color:#00ff88;color:#9affd1;}
.yellow{border-color:#ffcc00;color:#fff3a0;animation:pulse 2s infinite;}
.red{border-color:#ff3344;color:#ffb3b8;animation:pulse 1s infinite;}
@keyframes pulse{0%{opacity:.6}50%{opacity:1}100%{opacity:.6}}
</style>
</head>
<body>
<div id="list"></div>

<script>
const listEl = document.getElementById("list");
let counter = 1;

function add(name, val) {
  const d = document.createElement("div");
  d.className = "indicator";
  d.textContent = `${counter}. ${name}: ${val}`;
  listEl.appendChild(d);
  counter++;
}

// Оновлення даних
async function fetchData() {
  listEl.innerHTML = "";
  counter = 1;

  try {
    // ========== COSMOS (5) ==========
    const plasma = await fetch("https://services.swpc.noaa.gov/products/solar-wind/plasma-6-hour.json").then(r=>r.json());
    const mag = await fetch("https://services.swpc.noaa.gov/products/solar-wind/mag-6-hour.json").then(r=>r.json());
    const kp = await fetch("https://services.swpc.noaa.gov/products/noaa-planetary-k-index.json").then(r=>r.json());
    const lastPl = plasma.at(-1);
    const lastMag = mag.at(-1);
    const lastKp = kp.at(-1)[1];
    add("Solar Wind Speed (km/s)", lastPl[1]);
    add("Solar Wind Density (/cc)", lastPl[2]);
    add("Solar Wind Temp (K)", lastPl[3]);
    add("IMF Bz (nT)", lastMag[4]);
    add("Kp Index", lastKp);

    // ========== PLANET (5) ==========
    const eq = await fetch("https://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/all_hour.geojson").then(r=>r.json());
    const mags = eq.features.map(e=>e.properties.mag||0);
    add("EQ Count (hour)", eq.features.length);
    add("Max EQ Magnitude", Math.max(...mags));
    add("Min EQ Magnitude", Math.min(...mags));
    add("Recent EQ Latitude", eq.features.at(-1)?.geometry.coordinates[1] || "N/A");
    add("Recent EQ Longitude", eq.features.at(-1)?.geometry.coordinates[0] || "N/A");

    // ========== CRYPTO (12) ==========
    const crypto = await fetch("https://api.coingecko.com/api/v3/simple/price?ids=bitcoin,ethereum,ripple,litecoin&vs_currencies=usd,eur,gbp").then(r=>r.json());
    for (const coin of ["bitcoin","ethereum","ripple","litecoin"]) {
      add(`${coin} USD`, crypto[coin].usd);
      add(`${coin} EUR`, crypto[coin].eur);
      add(`${coin} GBP`, crypto[coin].gbp);
    }

    // ========== EXCHANGE RATES (5) ==========
    const rates = await fetch("https://api.exchangerate.host/latest?base=USD").then(r=>r.json());
    add("USD->EUR", rates.rates.EUR.toFixed(4));
    add("USD->GBP", rates.rates.GBP.toFixed(4));
    add("USD->JPY", rates.rates.JPY.toFixed(2));
    add("USD->CHF", rates.rates.CHF.toFixed(4));
    add("USD->AUD", rates.rates.AUD.toFixed(4));

    // ========== WEATHER (10) ==========
    const cities = [
      {name:"Kyiv", lat:50.45, lon:30.52},
      {name:"London", lat:51.51, lon:-0.13},
      {name:"New York", lat:40.71, lon:-74.01},
      {name:"Tokyo", lat:35.68, lon:139.69},
      {name:"Sydney", lat:-33.87, lon:151.21},
    ];
    for (const city of cities) {
      const w = await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${city.lat}&longitude=${city.lon}&current_weather=true`).then(r=>r.json());
      add(`${city.name} Temp (°C)`, w.current_weather.temperature);
      add(`${city.name} Wind (m/s)`, w.current_weather.windspeed);
    }

    // ========== SOCIAL / REDDIT (8) ==========
    const redditNews = await fetch("https://www.reddit.com/r/worldnews/.json?limit=25").then(r=>r.json());
    const redditPosts = redditNews.data.children.map(a=>a.data.title).join(" ");
    add("Reddit Posts Count", redditNews.data.children.length);
    add("Reddit Conflict Mentions", (redditPosts.match(/war|conflict|attack|crisis|earthquake|flood/gi)||[]).length);
    add("Reddit Avg Words/Post", (redditPosts.split(/\s+/).length/redditNews.data.children.length).toFixed(1));
    add("Reddit Titles Length", redditPosts.length);
    add("Reddit Latest Post", redditNews.data.children.at(-1)?.data.title || "N/A");
    add("Reddit First Post", redditNews.data.children.at(0)?.data.title || "N/A");
    add("Reddit 5th Post", redditNews.data.children.at(4)?.data.title || "N/A");
    add("Reddit 10th Post", redditNews.data.children.at(9)?.data.title || "N/A");

  } catch(e){console.error("API Error", e);}
}

// INIT
fetchData();
setInterval(fetchData,60000); // оновлення раз на хвилину
</script>
</body>
</html>
