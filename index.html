<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ibonarium Space Dashboard</title>
<style>
  body {
    margin: 0;
    background: #000;
    color: #fff;
    font-family: 'Courier New', monospace;
    overflow-x: hidden;
  }

  canvas {
    position: fixed;
    top: 0;
    left: 0;
    z-index: 0;
  }

  .container {
    position: relative;
    z-index: 1;
    max-width: 1000px;
    margin: 0 auto;
    padding: 20px;
  }

  h1 {
    text-align: center;
    color: #cfefff;
    margin-bottom: 20px;
  }

  .indicator {
    display: flex;
    justify-content: space-between;
    padding: 10px;
    margin: 5px 0;
    border-radius: 4px;
    background: rgba(255,255,255,0.05);
    font-size: 14px;
  }

  .indicator span {
    font-weight: bold;
  }

  .green { color: #0f0; }
  .yellow { color: #ff0; }
  .red { color: #f00; }

  .list {
    max-height: 80vh;
    overflow-y: auto;
    padding-right: 10px;
  }
</style>
</head>
<body>

<canvas id="stars"></canvas>

<div class="container">
  <h1>Ibonarium Space Dashboard</h1>
  <div class="list" id="indicatorList">
    <!-- Показники будуть сюди вставлятися JS -->
  </div>
</div>

<script>
// ==== Анімація зірок ====
const canvas = document.getElementById('stars');
const ctx = canvas.getContext('2d');
let width = canvas.width = window.innerWidth;
let height = canvas.height = window.innerHeight;

const stars = [];
const STAR_COUNT = 400;

for(let i=0;i<STAR_COUNT;i++){
  stars.push({
    x: Math.random()*width,
    y: Math.random()*height,
    z: Math.random()*width,
    o: Math.random()
  });
}

function animateStars(){
  ctx.fillStyle = "#000";
  ctx.fillRect(0,0,width,height);
  for(let i=0;i<stars.length;i++){
    let s = stars[i];
    s.z -= 3;
    if(s.z <= 0){
      s.z = width;
      s.x = Math.random()*width;
      s.y = Math.random()*height;
      s.o = Math.random();
    }
    const k = 128.0 / s.z;
    const px = (s.x - width/2) * k + width/2;
    const py = (s.y - height/2) * k + height/2;
    const size = (1 - s.z/width)*3;
    ctx.beginPath();
    ctx.arc(px, py, size, 0, Math.PI*2);
    ctx.fillStyle = `rgba(255,255,255,${s.o})`;
    ctx.fill();
  }
  requestAnimationFrame(animateStars);
}
animateStars();

window.addEventListener('resize',()=>{
  width = canvas.width = window.innerWidth;
  height = canvas.height = window.innerHeight;
});

// ==== Космічні показники через API ====
const indicatorList = document.getElementById('indicatorList');

// Відкриті API NOAA / SWPC
const APIs = {
  solarWind: 'https://services.swpc.noaa.gov/json/solar-wind.json',
  kpIndex: 'https://services.swpc.noaa.gov/json/planetary-k-index.json'
};

// Масив для 50 показників (доповнюємо реальною інформацією)
const indicators50 = [
  'Solar Wind Speed','Solar Wind Density','Magnetic Field Bx','Magnetic Field By',
  'Magnetic Field Bz','Proton Temperature','Proton Flux','Electron Flux',
  'Geomagnetic Kp Index','Planetary K-index','Sunspot Number','Solar Radio Flux 10.7cm',
  'CME Speed','CME Direction','Solar Flare Class','X-ray Flux','Solar Radiation Level',
  'Aurora Forecast','Magnetopause Distance','Interplanetary Shock','Coronal Hole Area',
  'Cosmic Ray Level','Solar Energetic Particle Flux','Heliospheric Current Sheet',
  'IMF Magnitude','IMF Theta','IMF Phi','Dst Index','AE Index','AL Index',
  'PC Index','Solar Wind Pressure','Solar Wind Mach Number','Electron Density',
  'Proton Density','Solar Wind Velocity GSE','Magnetic Field Strength',
  'Interplanetary Magnetic Field','Solar X-ray Background','Solar EUV Flux',
  'Solar Wind Temperature','Magnetic Field Vector','Solar Wind Dynamic Pressure',
  'Solar Wind Beta','Magnetospheric Current','Heliospheric Plasma','Shock Arrival',
  'Magnetic Reconnection Rate','Radiation Belt Particle Flux'
];

// Функція вибору кольору стану
function getColor(value){
  if(value < 3) return 'green';
  else if(value < 6) return 'yellow';
  else return 'red';
}

// Завантаження даних з API та відображення
async function loadIndicators(){
  indicatorList.innerHTML = '';
  
  // 1. Solar Wind
  let solarData = [];
  try {
    const res = await fetch(APIs.solarWind);
    solarData = await res.json();
  } catch(e){ console.log('Solar Wind API Error', e); }

  // 2. Planetary K-index
  let kpData = [];
  try {
    const res = await fetch(APIs.kpIndex);
    kpData = await res.json();
  } catch(e){ console.log('Kp Index API Error', e); }

  for(let i=0;i<indicators50.length;i++){
    let val = 0;

    // Підставляємо реальні значення для деяких показників
    const name = indicators50[i];
    if(name === 'Solar Wind Speed' && solarData.length>0) val = solarData[0].speed;
    else if(name === 'Solar Wind Density' && solarData.length>0) val = solarData[0].density;
    else if(name === 'Magnetic Field Bx' && solarData.length>0) val = solarData[0].bx_gsm;
    else if(name === 'Magnetic Field By' && solarData.length>0) val = solarData[0].by_gsm;
    else if(name === 'Magnetic Field Bz' && solarData.length>0) val = solarData[0].bz_gsm;
    else if(name === 'Geomagnetic Kp Index' && kpData.length>0) val = kpData[0].kp_index;
    else val = Math.random()*10; // demo для інших показників

    const color = getColor(val);
    const div = document.createElement('div');
    div.className = 'indicator';
    div.innerHTML = `<span>${name}: ${val}</span> <span class="${color}">&#9679;</span>`;
    indicatorList.appendChild(div);
  }
}

// Початкове завантаження
loadIndicators();

// Оновлення щохвилини
setInterval(loadIndicators, 60000);
</script>

</body>
</html>
