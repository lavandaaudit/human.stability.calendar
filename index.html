<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<title>ibonarium.stability.human.lab.live — 50 Signals</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
*{margin:0;padding:0;box-sizing:border-box;}
html,body{width:100%;height:100%;background:#000;color:#cfefff;font-family:Inter,monospace;overflow:hidden;display:flex;justify-content:center;align-items:center;}
#list{width:90%;max-width:700px;height:90%;overflow-y:auto;padding:20px;border:1px solid rgba(255,255,255,.2);text-align:left;}
.item{margin:4px 0;font-size:14px;padding:6px 8px;border-left:4px solid #333;}
</style>
</head>
<body>
<div id="list"></div>

<script>
const list = document.getElementById("list");
let idx = 1;
function add(label, value){
  const d=document.createElement("div");
  d.className="item";
  d.textContent = idx + ". " + label + ": " + value;
  list.appendChild(d);
  idx++;
}

async function updateSignals(){
  list.innerHTML=""; idx=1;

  try{
    // ‣ NOAA Solar Wind
    const plasma = await fetch("https://services.swpc.noaa.gov/products/solar-wind/plasma-6-hour.json").then(r=>r.json());
    const mag = await fetch("https://services.swpc.noaa.gov/products/solar-wind/mag-6-hour.json").then(r=>r.json());
    const aurora = await fetch("https://services.swpc.noaa.gov/products/aurora-forecast.json").then(r=>r.json());
    const lastPl = plasma.at(-1), lastMag = mag.at(-1);

    add("Solar Wind Speed (km/s)", lastPl[1]);
    add("Solar Wind Density (p/cm³)", lastPl[2]);
    add("Solar Wind Temp (K)", lastPl[3]);
    add("IMF Bz (nT)", lastMag[4]);
    add("Aurora Forecast Prob Grid Points", aurora.coordinates ? aurora.coordinates.length : "N/A");

    // ‣ Earthquakes (USGS)
    const eq1h = await fetch("https://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/all_hour.geojson").then(r=>r.json());
    const mags = eq1h.features.map(f=>f.properties.mag||0);
    add("EQ Count (1h)", eq1h.features.length);
    add("EQ Max Mag (1h)", Math.max(...mags));
    add("EQ Min Mag (1h)", Math.min(...mags));
    add("EQ Avg Mag (1h)", (mags.reduce((a,b)=>a+b,0)/Math.max(mags.length,1)).toFixed(2));
    add("EQ Depth Avg (1h)", (eq1h.features.reduce((a,f)=>a+(f.geometry.coordinates[2]||0),0)/Math.max(eq1h.features.length,1)).toFixed(1));

    // ‣ Cryptocurrency prices (CoinGecko)
    const crypto = await fetch("https://api.coingecko.com/api/v3/simple/price?ids=bitcoin,ethereum,solana,cardano,ripple,polkadot,chainlink,tron,litecoin,monero&vs_currencies=usd").then(r=>r.json());
    for(const key in crypto){
      add(`Price ${key.toUpperCase()} (USD)`, crypto[key].usd);
    }

    // ‣ Currency Exchange rates (exchangerate.host)
    const fx = await fetch("https://api.exchangerate.host/latest?base=USD&symbols=EUR,GBP,JPY,CAD,AUD,CHF,CNY,INR,RUB,BRL").then(r=>r.json());
    for(const c in fx.rates){
      add(`USD→${c} rate`, fx.rates[c]);
    }

    // ‣ Fear & Greed Index
    const fgData = await fetch("https://api.allorigins.win/raw?url=https://api.alternative.me/fng/").then(r=>r.json());
    add("Fear & Greed Index", fgData.data[0].value);

    // ‣ Open‑Meteo current weather (sample coords Kyiv)
    const weather = await fetch("https://api.open-meteo.com/v1/forecast?latitude=50&longitude=30&current_weather=true").then(r=>r.json());
    add("Temp (°C)", weather.current_weather.temperature);
    add("Wind Speed (m/s)", weather.current_weather.windspeed);
    add("Wind Dir (°)", weather.current_weather.winddirection);
    add("Weather Code", weather.current_weather.weathercode);

    // ‣ Reddit r/worldnews
    const r1 = await fetch("https://www.reddit.com/r/worldnews/.json?limit=50").then(r=>r.json());
    const titles1 = r1.data.children.map(x=>x.data.title).join(" ");
    add("Reddit r/worldnews Post Count", r1.data.children.length);

    // ‣ Reddit r/news
    const r2 = await fetch("https://www.reddit.com/r/news/.json?limit=50").then(r=>r.json());
    const titles2 = r2.data.children.map(x=>x.data.title).join(" ");
    add("Reddit r/news Post Count", r2.data.children.length);

    const allTitles = titles1 + " " + titles2;
    const conflicts = (allTitles.match(/war|attack|conflict|crisis|earthquake|flood/gi) || []).length;
    add("Reddit Conflict Mentions", conflicts);

    // ‣ Public APIs useful simple metrics
    // Unix time from a public API
    const unix = await fetch("https://worldtimeapi.org/api/ip").then(r=>r.json());
    add("Unix Timestamp", unix.unixtime);
    add("Day of Week", unix.day_of_week);

    // Nameday (example no key)
    const nameday = await fetch("https://nameday.abalin.net/get/today").then(r=>r.json());
    add("Nameday Today (any)", nameday.nameday || "N/A");

    // Public Holidays example (UK)
    const holidays = await fetch("https://date.nager.at/api/v3/NextPublicHolidaysWorldwide").then(r=>r.json());
    add("Next Global Holiday (first)", holidays[0]?.localName || "N/A");

    // Time API values
    add("UTC DateTime", unix.utc_datetime);

    // Country IP geolocation (free)
    const geo = await fetch("https://api.freegeoip.app/json/?apikey=free").then(r=>r.json()).catch(()=>({country_name:"N/A"}));
    add("GeoIP Country", geo.country_name);

    // Additional NOAA KP samples length
    add("NOAA kp-index samples total", kp.length);

    // Earthquake additional
    add("Largest EQ Time (ISO)", eq1h.features.at(0)?.properties.time || "N/A");

  }catch(e){
    console.error(e);
    add("ERROR","Failed to fetch some API");
  }
}

updateSignals();
setInterval(updateSignals,60000);
</script>

</body>
</html>
