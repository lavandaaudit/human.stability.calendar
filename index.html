<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<title>ibonarium.stability.human.lab.live</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
*{margin:0;padding:0;box-sizing:border-box;}
html,body{width:100%;height:100%;background:#000;color:#cfefff;font-family:Inter,monospace;overflow:hidden;display:flex;justify-content:center;align-items:center;}
#list{width:90%;max-width:800px;height:90%;overflow-y:auto;padding:20px;border:1px solid rgba(255,255,255,.2);text-align:center;}
.indicator{margin:4px 0;font-size:14px;background:rgba(255,255,255,.05);padding:6px 8px;border-left:4px solid #333;}
.green{border-color:#00ff88;color:#9affd1;}
.yellow{border-color:#ffcc00;color:#fff3a0;animation:pulse 2s infinite;}
.red{border-color:#ff3344;color:#ffb3b8;animation:pulse 1s infinite;}
@keyframes pulse{0%{opacity:.6}50%{opacity:1}100%{opacity:.6}}
</style>
</head>
<body>
<div id="list"></div>

<script>
const listEl = document.getElementById("list");

function level(){ return "green"; } // колір не важливий тут
function add(num,name,val){
  const d = document.createElement("div");
  d.className = `indicator ${level()}`;
  d.textContent = `${num}. ${name}: ${val}`;
  listEl.appendChild(d);
}

async function fetchData(){
  listEl.innerHTML = "";

  try{
    // ================= COSMOS (25) =================
    const plasma = await fetch("https://services.swpc.noaa.gov/products/solar-wind/plasma-6-hour.json").then(r=>r.json().catch(()=>[]));
    const mag = await fetch("https://services.swpc.noaa.gov/products/solar-wind/mag-6-hour.json").then(r=>r.json().catch(()=>[]));
    const kp = await fetch("https://services.swpc.noaa.gov/products/noaa-planetary-k-index.json").then(r=>r.json().catch(()=>[]));
    const solar = await fetch("https://services.swpc.noaa.gov/products/solar-flux/solar-flux.json").then(r=>r.json().catch(()=>[]));

    const lastPl = plasma.at(-1) || ["N/A",0,0,0];
    const lastMag = mag.at(-1) || ["N/A",0,0,0,0];
    const lastKp = kp.at(-1)? kp.at(-1)[1] : "N/A";
    const lastSolar = solar.at(-1) || ["N/A",0,0,0];

    add(1,"Solar Wind Speed (km/s)", lastPl[1]);
    add(2,"Solar Wind Density (/cc)", lastPl[2]);
    add(3,"Solar Wind Temp (K)", lastPl[3]);
    add(4,"IMF Bz (nT)", lastMag[4]);
    add(5,"Kp Index", lastKp);
    add(6,"Solar F10.7 Flux", lastSolar[1]);
    add(7,"Solar Proton Flux", lastSolar[2]);
    add(8,"Geomagnetic Ap Index", lastSolar[3]);
    add(9,"Solar Wind Speed 1hr ago", plasma.at(-2)?plasma.at(-2)[1]:"N/A");
    add(10,"Solar Wind Density 1hr ago", plasma.at(-2)?plasma.at(-2)[2]:"N/A");
    add(11,"Solar Wind Temp 1hr ago", plasma.at(-2)?plasma.at(-2)[3]:"N/A");
    add(12,"IMF Bz 1hr ago", mag.at(-2)?mag.at(-2)[4]:"N/A");
    add(13,"Kp Index 1hr ago", kp.at(-2)?kp.at(-2)[1]:"N/A");
    add(14,"Solar F10.7 1hr ago", solar.at(-2)?solar.at(-2)[1]:"N/A");
    add(15,"Solar Proton Flux 1hr ago", solar.at(-2)?solar.at(-2)[2]:"N/A");
    add(16,"Geomagnetic Ap Index 1hr ago", solar.at(-2)?solar.at(-2)[3]:"N/A");
    add(17,"Solar Wind Speed 2hr ago", plasma.at(-3)?plasma.at(-3)[1]:"N/A");
    add(18,"Solar Wind Density 2hr ago", plasma.at(-3)?plasma.at(-3)[2]:"N/A");
    add(19,"Solar Wind Temp 2hr ago", plasma.at(-3)?plasma.at(-3)[3]:"N/A");
    add(20,"IMF Bz 2hr ago", mag.at(-3)?mag.at(-3)[4]:"N/A");
    add(21,"Kp Index 2hr ago", kp.at(-3)?kp.at(-3)[1]:"N/A");
    add(22,"Solar F10.7 2hr ago", solar.at(-3)?solar.at(-3)[1]:"N/A");
    add(23,"Solar Proton Flux 2hr ago", solar.at(-3)?solar.at(-3)[2]:"N/A");
    add(24,"Geomagnetic Ap Index 2hr ago", solar.at(-3)?solar.at(-3)[3]:"N/A");
    add(25,"Solar Wind Temp 3hr ago", plasma.at(-4)?plasma.at(-4)[3]:"N/A");

    // ================= PLANET (25) =================
    const eq = await fetch("https://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/all_hour.geojson").then(r=>r.json().catch(()=>({features:[]})));
    
    for(let i=26;i<=50;i++){
      const e = eq.features[i-26] || {properties:{mag:"N/A"}, geometry:{coordinates:[0,0,0]}};
      add(i,`EQ ${i-25} Mag`, e.properties.mag);
      add(++i,`EQ ${i-25} Lat`, e.geometry.coordinates[1]);
      add(++i,`EQ ${i-25} Lon`, e.geometry.coordinates[0]);
    }

  }catch(e){console.error("API Error", e);}
}

// INIT
fetchData();
setInterval(fetchData,60000);
</script>
</body>
</html>
